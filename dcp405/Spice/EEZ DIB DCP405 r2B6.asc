Version 4
SHEET 1 20904 1220
WIRE 4912 -5552 4528 -5552
WIRE 4976 -5552 4912 -5552
WIRE 5136 -5552 5056 -5552
WIRE 5408 -5552 5232 -5552
WIRE 6736 -5552 5408 -5552
WIRE 6928 -5552 6736 -5552
WIRE 6960 -5552 6928 -5552
WIRE 6624 -5504 6528 -5504
WIRE 6736 -5504 6736 -5552
WIRE 6736 -5504 6624 -5504
WIRE 4528 -5472 4528 -5552
WIRE 4912 -5456 4912 -5552
WIRE 4976 -5456 4912 -5456
WIRE 5248 -5456 5056 -5456
WIRE 5408 -5456 5408 -5552
WIRE 5408 -5456 5344 -5456
WIRE 6736 -5440 6736 -5504
WIRE 4912 -5392 4912 -5456
WIRE 4992 -5392 4912 -5392
WIRE 6528 -5376 6528 -5504
WIRE 5184 -5344 5184 -5488
WIRE 5296 -5344 5296 -5392
WIRE 4528 -5328 4528 -5392
WIRE 6624 -5312 6624 -5504
WIRE 4992 -5280 4992 -5392
WIRE 4064 -5216 3920 -5216
WIRE 4192 -5216 4064 -5216
WIRE 4288 -5216 4288 -5232
WIRE 4288 -5216 4192 -5216
WIRE 3920 -5200 3920 -5216
WIRE 4064 -5200 4064 -5216
WIRE 6736 -5184 6736 -5360
WIRE 4992 -5168 4992 -5200
WIRE 5184 -5168 5184 -5264
WIRE 5184 -5168 4992 -5168
WIRE 5296 -5168 5296 -5264
WIRE 5296 -5168 5184 -5168
WIRE 6528 -5168 6528 -5296
WIRE 6528 -5168 6368 -5168
WIRE 6624 -5168 6624 -5248
WIRE 6624 -5168 6528 -5168
WIRE 6688 -5168 6624 -5168
WIRE 6368 -5136 6368 -5168
WIRE 4640 -5120 4576 -5120
WIRE 4752 -5120 4720 -5120
WIRE 5504 -5088 5424 -5088
WIRE 5616 -5088 5504 -5088
WIRE 6080 -5088 6080 -5120
WIRE 6080 -5088 5712 -5088
WIRE 6112 -5088 6080 -5088
WIRE 6256 -5088 6192 -5088
WIRE 6304 -5088 6256 -5088
WIRE 4448 -5072 4448 -5104
WIRE 3920 -5056 3920 -5120
WIRE 4576 -5056 4576 -5120
WIRE 4576 -5056 4480 -5056
WIRE 4288 -5040 4288 -5136
WIRE 4320 -5040 4288 -5040
WIRE 4416 -5040 4400 -5040
WIRE 6736 -5040 6736 -5088
WIRE 4576 -5024 4480 -5024
WIRE 4640 -5024 4576 -5024
WIRE 4752 -5024 4720 -5024
WIRE 5504 -5008 5504 -5088
WIRE 5664 -5008 5664 -5024
WIRE 5744 -5008 5664 -5008
WIRE 6256 -5008 6256 -5088
WIRE 6368 -5008 6368 -5040
WIRE 4448 -4992 4448 -5008
WIRE 5744 -4992 5744 -5008
WIRE 3920 -4960 3920 -4992
WIRE 5504 -4928 5504 -4944
WIRE 5744 -4912 5744 -4928
WIRE 6256 -4912 6256 -4928
WIRE 6368 -4912 6368 -4928
WIRE 6368 -4912 6256 -4912
WIRE 6416 -4912 6368 -4912
WIRE 4016 -4880 3968 -4880
WIRE 4288 -4880 4288 -5040
WIRE 4288 -4880 4016 -4880
WIRE 3920 -4832 3920 -4864
WIRE 5184 -4816 5184 -5168
WIRE 6928 -4800 6928 -5552
WIRE 6928 -4800 6192 -4800
WIRE 4016 -4784 4016 -4880
WIRE 4016 -4784 3856 -4784
WIRE 5664 -4768 5664 -5008
WIRE 5424 -4752 5424 -4784
WIRE 5424 -4752 5360 -4752
WIRE 6544 -4752 6432 -4752
WIRE 4192 -4736 4192 -5136
WIRE 4192 -4736 3856 -4736
WIRE 5504 -4736 5504 -4752
WIRE 5936 -4736 5856 -4736
WIRE 6032 -4736 6016 -4736
WIRE 6224 -4736 6096 -4736
WIRE 6544 -4736 6544 -4752
WIRE 4064 -4704 4064 -5120
WIRE 6928 -4688 6928 -4800
WIRE 7024 -4688 6928 -4688
WIRE 7152 -4688 7024 -4688
WIRE 7248 -4688 7152 -4688
WIRE 5856 -4656 5856 -4736
WIRE 5872 -4656 5856 -4656
WIRE 6064 -4656 5952 -4656
WIRE 7424 -4656 7424 -4688
WIRE 5856 -4640 5856 -4656
WIRE 5856 -4640 5824 -4640
WIRE 5424 -4624 5424 -4752
WIRE 5504 -4624 5504 -4656
WIRE 5504 -4624 5424 -4624
WIRE 5584 -4624 5504 -4624
WIRE 5664 -4624 5664 -4688
WIRE 5664 -4624 5648 -4624
WIRE 5760 -4624 5664 -4624
WIRE 7248 -4624 7248 -4688
WIRE 4064 -4608 4064 -4640
WIRE 5856 -4608 5824 -4608
WIRE 7024 -4608 7024 -4688
WIRE 4640 -4592 4480 -4592
WIRE 4752 -4592 4720 -4592
WIRE 4192 -4576 4192 -4736
WIRE 4320 -4576 4192 -4576
WIRE 4416 -4576 4400 -4576
WIRE 5856 -4576 5856 -4608
WIRE 5936 -4576 5856 -4576
WIRE 6288 -4576 6016 -4576
WIRE 4576 -4560 4576 -5024
WIRE 4576 -4560 4480 -4560
WIRE 5184 -4560 5184 -4608
WIRE 7152 -4560 7152 -4688
WIRE 6544 -4544 6544 -4656
WIRE 6576 -4544 6544 -4544
WIRE 6720 -4544 6656 -4544
WIRE 6928 -4544 6928 -4688
WIRE 6928 -4544 6800 -4544
WIRE 7424 -4544 7424 -4576
WIRE 4192 -4528 4192 -4576
WIRE 4192 -4528 4112 -4528
WIRE 5664 -4528 5664 -4624
WIRE 5664 -4528 5632 -4528
WIRE 5696 -4528 5664 -4528
WIRE 5776 -4528 5760 -4528
WIRE 5856 -4528 5856 -4576
WIRE 7584 -4528 7472 -4528
WIRE 4448 -4512 4448 -4544
WIRE 7024 -4512 7024 -4544
WIRE 7584 -4512 7584 -4528
WIRE 5856 -4496 5856 -4528
WIRE 5872 -4496 5856 -4496
WIRE 5984 -4496 5952 -4496
WIRE 6192 -4496 6192 -4800
WIRE 6192 -4496 6048 -4496
WIRE 6544 -4496 6544 -4544
WIRE 6544 -4496 6512 -4496
WIRE 4064 -4480 4064 -4512
WIRE 6288 -4480 6288 -4576
WIRE 6400 -4480 6288 -4480
WIRE 6448 -4480 6400 -4480
WIRE 7488 -4480 7472 -4480
WIRE 6544 -4464 6512 -4464
WIRE 6064 -4432 6064 -4656
WIRE 6064 -4432 6032 -4432
WIRE 5184 -4416 5184 -4480
WIRE 6064 -4400 6064 -4432
WIRE 7584 -4400 7584 -4432
WIRE 6400 -4368 6400 -4480
WIRE 6400 -4368 6336 -4368
WIRE 6416 -4368 6400 -4368
WIRE 6544 -4368 6544 -4464
WIRE 6544 -4368 6496 -4368
WIRE 6576 -4368 6544 -4368
WIRE 6688 -4368 6656 -4368
WIRE 6928 -4368 6768 -4368
WIRE 4864 -4336 4832 -4336
WIRE 4928 -4336 4928 -4384
WIRE 4928 -4336 4864 -4336
WIRE 5056 -4336 4928 -4336
WIRE 5136 -4336 5056 -4336
WIRE 4864 -4320 4864 -4336
WIRE 6928 -4320 6928 -4368
WIRE 7024 -4320 7024 -4432
WIRE 7024 -4320 6928 -4320
WIRE 7152 -4320 7152 -4496
WIRE 7152 -4320 7024 -4320
WIRE 7248 -4320 7248 -4544
WIRE 7248 -4320 7152 -4320
WIRE 7424 -4320 7424 -4464
WIRE 7424 -4320 7248 -4320
WIRE 5056 -4304 5056 -4336
WIRE 6064 -4288 6064 -4320
WIRE 6224 -4240 6224 -4736
WIRE 6928 -4240 6928 -4320
WIRE 6928 -4240 6224 -4240
WIRE 7136 -4240 6928 -4240
WIRE 7472 -4240 7136 -4240
WIRE 4864 -4208 4864 -4240
WIRE 5056 -4208 5056 -4224
WIRE 5184 -4208 5184 -4320
WIRE 5184 -4208 5056 -4208
WIRE 4416 -4176 4288 -4176
WIRE 6784 -4144 6784 -4160
WIRE 4176 -4128 4176 -4160
WIRE 4288 -4128 4288 -4176
WIRE 5184 -4112 5184 -4208
WIRE 5936 -4112 5872 -4112
WIRE 6096 -4112 6016 -4112
WIRE 5504 -4096 5504 -4624
WIRE 5616 -4096 5504 -4096
WIRE 5696 -4096 5680 -4096
WIRE 5808 -4096 5696 -4096
WIRE 4912 -4080 4896 -4080
WIRE 4960 -4080 4912 -4080
WIRE 5088 -4080 5088 -4096
WIRE 5088 -4080 5040 -4080
WIRE 5904 -4080 5872 -4080
WIRE 5088 -4048 5088 -4080
WIRE 6784 -4048 6784 -4064
WIRE 6848 -4048 6784 -4048
WIRE 7136 -4048 7136 -4240
WIRE 7136 -4048 6928 -4048
WIRE 4912 -4032 4912 -4080
WIRE 5040 -4032 4912 -4032
WIRE 5904 -4032 5904 -4080
WIRE 5936 -4032 5904 -4032
WIRE 6192 -4032 6192 -4496
WIRE 6192 -4032 6080 -4032
WIRE 3936 -4016 3936 -4048
WIRE 4000 -4016 3936 -4016
WIRE 4064 -4016 4064 -4048
WIRE 4064 -4016 4000 -4016
WIRE 4288 -4016 4288 -4048
WIRE 7136 -4016 7136 -4048
WIRE 4000 -4000 4000 -4016
WIRE 4176 -4000 4176 -4048
WIRE 4912 -3984 4912 -4032
WIRE 6784 -3968 6784 -4048
WIRE 6784 -3968 6704 -3968
WIRE 5088 -3936 5088 -3952
WIRE 5136 -3936 5088 -3936
WIRE 5264 -3936 5216 -3936
WIRE 5696 -3936 5696 -4096
WIRE 5712 -3936 5696 -3936
WIRE 5792 -3936 5776 -3936
WIRE 5904 -3936 5904 -4032
WIRE 5904 -3936 5872 -3936
WIRE 5936 -3936 5904 -3936
WIRE 6400 -3936 6400 -3984
WIRE 6400 -3936 6016 -3936
WIRE 6528 -3936 6400 -3936
WIRE 6560 -3936 6528 -3936
WIRE 6784 -3904 6704 -3904
WIRE 6848 -3904 6784 -3904
WIRE 7136 -3904 7136 -3936
WIRE 7136 -3904 6928 -3904
WIRE 4912 -3888 4912 -3904
WIRE 6096 -3872 6096 -4112
WIRE 6096 -3872 6064 -3872
WIRE 5696 -3856 5696 -3936
WIRE 5776 -3856 5696 -3856
WIRE 5904 -3856 5904 -3936
WIRE 5904 -3856 5840 -3856
WIRE 6096 -3840 6096 -3872
WIRE 5696 -3824 5696 -3856
WIRE 5696 -3824 5664 -3824
WIRE 7136 -3824 7136 -3904
WIRE 6528 -3792 6528 -3936
WIRE 6560 -3792 6528 -3792
WIRE 6784 -3792 6784 -3904
WIRE 6784 -3792 6640 -3792
WIRE 6096 -3728 6096 -3760
FLAG 6064 -4288 0
FLAG 4288 -4016 0
FLAG 6032 -4432 U_SET
IOPIN 6032 -4432 Out
FLAG 6960 -5552 Vout+
IOPIN 6960 -5552 Out
FLAG 6336 -4368 U_MON
IOPIN 6336 -4368 Out
FLAG 5632 -4528 CV_out
IOPIN 5632 -4528 Out
FLAG 7472 -4240 Vout-
IOPIN 7472 -4240 Out
FLAG 6096 -3728 0
FLAG 6064 -3872 I_SET
IOPIN 6064 -3872 Out
FLAG 5664 -3824 CC_out
IOPIN 5664 -3824 Out
FLAG 6432 -4752 COM
IOPIN 6432 -4752 In
FLAG 4928 -4384 OE
IOPIN 4928 -4384 Out
FLAG 4864 -4208 0
FLAG 4832 -4336 OE_SW
FLAG 4176 -4000 0
FLAG 4176 -4160 -Vdp
FLAG 4416 -4176 COM
IOPIN 4416 -4176 Out
FLAG 5184 -4112 0
FLAG 6784 -4160 COM
IOPIN 6784 -4160 In
FLAG 7488 -4480 0
FLAG 7584 -4400 0
FLAG 7584 -4528 LOAD_SW
FLAG 4000 -4000 0
FLAG 3936 -4128 Vcc
FLAG 4064 -4128 Vee
FLAG 5504 -4752 Vcc
FLAG 5792 -4592 Vcc
FLAG 5840 -4064 Vcc
FLAG 5840 -4128 Vee
FLAG 5792 -4656 Vee
FLAG 6480 -4448 Vcc
FLAG 6480 -4512 Vee
FLAG 6672 -4016 Vee
FLAG 6672 -3856 Vcc
FLAG 6736 -5040 0
FLAG 6416 -4912 -Vdp
FLAG 5264 -3936 DP
IOPIN 5264 -3936 Out
FLAG 4912 -3888 0
FLAG 5088 -4096 Vcc
FLAG 6400 -3984 I_MON
FLAG 7136 -3824 0
FLAG 4528 -5328 0
FLAG 3856 -4784 CV
IOPIN 3856 -4784 Out
FLAG 3920 -4832 0
FLAG 4448 -5104 Vcc
FLAG 4448 -4608 Vcc
FLAG 4448 -4512 Vee
FLAG 4448 -4992 Vee
FLAG 4288 -5232 Vcc
FLAG 5424 -4784 Drive
IOPIN 5424 -4784 Out
FLAG 4752 -5024 Drive
IOPIN 4752 -5024 Out
FLAG 4752 -5120 CV_out
IOPIN 4752 -5120 Out
FLAG 4752 -4592 CC_out
IOPIN 4752 -4592 Out
FLAG 4064 -4480 0
FLAG 3856 -4736 CC
IOPIN 3856 -4736 Out
FLAG 5744 -4912 0
FLAG 5504 -4928 0
FLAG 5424 -5088 DP
IOPIN 5424 -5088 Out
FLAG 4896 -4080 !dp_cmd
FLAG 6080 -5120 dp_action
SYMBOL res 5520 -4752 M0
WINDOW 0 -17 38 Right 2
WINDOW 3 -15 66 Right 2
SYMATTR InstName R2
SYMATTR Value 2K2
SYMBOL res 5968 -4672 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 6032 -4592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 5760 -4544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 330p
SYMBOL voltage 6064 -4416 R0
WINDOW 3 -48 53 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 1 1m 100u 100u 20m 40m)
SYMATTR InstName Uset
SYMBOL res 6672 -4560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6672 -4384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6816 -4560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 24K
SYMATTR SpiceLine tol=0.1
SYMBOL res 6784 -4384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 24K
SYMATTR SpiceLine tol=0.1
SYMBOL res 6560 -4640 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 7.5k
SYMATTR SpiceLine tol=0.1
SYMBOL res 6512 -4384 R90
WINDOW 0 -2 69 VBottom 2
WINDOW 3 35 67 VTop 2
SYMATTR InstName R11
SYMATTR Value 7.5k
SYMATTR SpiceLine tol=0.1
SYMBOL cap 7008 -4608 R0
SYMATTR InstName C4
SYMATTR Value 470n
SYMBOL res 7008 -4528 R0
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL res 5968 -4512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 4K7
SYMBOL cap 6048 -4512 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 2n2
SYMBOL res 6032 -4752 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R36
SYMATTR Value 4K7
SYMBOL cap 6096 -4752 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value 2n2
SYMBOL res 6032 -4128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R40
SYMATTR Value 2.2K
SYMBOL res 6032 -3952 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R43
SYMATTR Value 10K
SYMBOL cap 5776 -3952 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 6n8
SYMBOL voltage 6096 -3856 R0
WINDOW 3 -26 94 Center 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value 1
SYMATTR InstName Iset1
SYMBOL res 6032 -4048 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R44
SYMATTR Value 10k
SYMBOL cap 6080 -4048 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C17
SYMATTR Value 1n
SYMBOL res 5888 -3952 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R46
SYMATTR Value 1K
SYMBOL diode 5616 -4080 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D7
SYMATTR Value 1N4148
SYMBOL diode 5584 -4608 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D20
SYMATTR Value 1N4148
SYMBOL voltage 4864 -4336 R0
WINDOW 0 -35 32 Right 2
WINDOW 3 -44 67 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName OE_switch_simulation
SYMATTR Value 5
SYMBOL res 5072 -4208 R180
WINDOW 3 36 40 Left 2
WINDOW 0 36 76 Left 2
SYMATTR Value 100K
SYMATTR InstName R19
SYMBOL res 7232 -4640 R0
SYMATTR InstName R1
SYMATTR Value 20R
SYMBOL voltage 4176 -4144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vdp
SYMATTR Value -9
SYMBOL voltage 4288 -4144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName Vcc1
SYMATTR Value 50m
SYMBOL pnp 5232 -5488 M270
WINDOW 0 49 -15 VLeft 2
WINDOW 3 21 -17 VLeft 2
SYMATTR InstName Q2
SYMATTR Value D45H11
SYMBOL res 5200 -5248 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 10R
SYMBOL res 5168 -4576 R0
SYMATTR InstName R17
SYMATTR Value 15R
SYMBOL nmos 5136 -4416 R0
SYMATTR InstName M1
SYMATTR Value IRF8910
SYMBOL res 4960 -5536 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 0R1
SYMBOL res 4960 -5440 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 0R1
SYMBOL pnp 5344 -5392 M270
WINDOW 0 47 -12 VLeft 2
WINDOW 3 19 -17 VLeft 2
SYMATTR InstName Q1
SYMATTR Value D45H11
SYMBOL res 5312 -5248 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R23
SYMATTR Value 10R
SYMBOL cap 7136 -4560 R0
SYMATTR InstName C2
SYMATTR Value 470µ
SYMATTR SpiceLine Rser=.18
SYMBOL res 5872 -4544 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R32
SYMATTR Value 0.001r
SYMBOL res 6832 -3888 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R42
SYMATTR Value 820R
SYMBOL res 6832 -4032 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R45
SYMATTR Value 820R
SYMBOL res 6800 -4048 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R47
SYMATTR Value 39K
SYMBOL res 6544 -3776 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R48
SYMATTR Value 39K
SYMBOL Opamps\\LTC2050HV 6672 -3936 R180
WINDOW 0 57 81 Left 2
SYMATTR InstName U9
SYMBOL voltage 4528 -5488 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 42 56 Left 2
SYMATTR Value 24
SYMATTR InstName Vin
SYMBOL sw 7424 -4448 R180
WINDOW 0 12 104 Left 2
WINDOW 3 17 11 Left 2
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL voltage 7584 -4528 M0
WINDOW 3 -231 175 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value PULSE(0 1 1m 100u 100u 20m 40m)
SYMATTR InstName V1
SYMBOL res 7440 -4672 M0
SYMATTR InstName R22
SYMATTR Value 5R
SYMBOL voltage 3936 -4144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 5
SYMBOL voltage 4064 -4032 R180
WINDOW 0 24 96 Left 2
WINDOW 3 24 16 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL pmos 6688 -5088 M180
WINDOW 0 63 67 Left 2
WINDOW 3 64 35 Left 2
SYMATTR InstName Q4
SYMATTR Value IRF9640
SYMBOL res 6720 -5456 R0
SYMATTR InstName R35
SYMATTR Value 2R2
SYMBOL res 6352 -5024 R0
SYMATTR InstName R39
SYMATTR Value 220r
SYMBOL res 6272 -4912 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R41
SYMATTR Value 1k
SYMBOL npn 6304 -5136 R0
WINDOW 0 86 77 Left 2
WINDOW 3 85 108 Left 2
SYMATTR InstName Q6
SYMATTR Value QBCP56-16
SYMBOL voltage 4912 -4000 R0
WINDOW 0 -53 31 Right 2
WINDOW 3 -46 68 Right 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName DP_switch_simulation1
SYMATTR Value PULSE(0 5 0 1u 1u 100m 300m 3)
SYMBOL res 5232 -3920 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R50
SYMATTR Value 2k2
SYMBOL pmos 5040 -3952 M180
SYMATTR InstName M3
SYMATTR Value BSS84
SYMBOL res 5056 -4064 M270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R51
SYMATTR Value 100k
SYMBOL xnpndrlngtn 5344 -4800 M0
SYMATTR InstName Q7
SYMATTR SpiceModel BDX53C
SYMBOL res 7152 -4032 M0
SYMATTR InstName R18
SYMATTR Value 10m
SYMBOL XOPAMP 4448 -5104 M0
WINDOW 38 -106 120 Left 2
WINDOW 0 -62 28 Left 2
SYMATTR SpiceModel LM339A
SYMATTR InstName U3
SYMBOL XOPAMP 4448 -4640 M0
WINDOW 38 -96 112 Left 2
WINDOW 0 -49 30 Right 2
SYMATTR SpiceModel LM339A
SYMATTR InstName U5
SYMBOL res 4272 -5232 R0
SYMATTR InstName R25
SYMATTR Value 4K7
SYMBOL LED 3904 -5056 R0
WINDOW 0 -15 18 Right 2
WINDOW 3 -13 51 Right 2
SYMATTR InstName LED1
SYMATTR Value NSPW500BS
SYMBOL res 3904 -5216 R0
SYMATTR InstName R26
SYMATTR Value 300
SYMBOL nmos 3968 -4960 M0
SYMATTR InstName M2
SYMATTR Value 2N7002
SYMBOL res 4624 -5008 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 10K
SYMBOL res 4624 -4576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R24
SYMATTR Value 10K
SYMBOL res 4624 -5104 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R27
SYMATTR Value 10K
SYMBOL res 4304 -5024 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R28
SYMATTR Value 4K7
SYMBOL LED 4048 -4704 R0
WINDOW 0 -15 18 Right 2
WINDOW 3 -13 51 Right 2
SYMATTR InstName LED2
SYMATTR Value NSPW500BS
SYMBOL res 4048 -5216 R0
SYMATTR InstName R29
SYMATTR Value 300
SYMBOL nmos 4112 -4608 M0
SYMATTR InstName M4
SYMATTR Value 2N7002
SYMBOL res 4304 -4560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R30
SYMATTR Value 4K7
SYMBOL res 4176 -5232 R0
SYMATTR InstName R31
SYMATTR Value 4K7
SYMBOL res 4976 -5296 R0
SYMATTR InstName R52
SYMATTR Value 2k2
SYMBOL res 6512 -5392 R0
SYMATTR InstName R37
SYMATTR Value 4k7
SYMBOL zener 6640 -5248 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMATTR Value BZX84C12L
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL pnp 5712 -5024 M270
WINDOW 0 32 -2 VLeft 2
WINDOW 3 7 -4 VLeft 2
SYMATTR InstName Q3
SYMATTR Value BC856B
SYMBOL res 5648 -4784 R0
SYMATTR InstName R33
SYMATTR Value 22k
SYMBOL diode 5728 -4992 R0
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL res 6208 -5104 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R34
SYMATTR Value 5k6
SYMBOL schottky 5488 -5008 R0
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL Opamps\\opamp2 5840 -4032 R180
WINDOW 3 21 110 Left 2
WINDOW 0 21 133 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U4
SYMBOL Opamps\\opamp2 5792 -4560 R180
WINDOW 3 21 110 Left 2
WINDOW 0 18 134 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U1
SYMBOL Opamps\\opamp2 6480 -4416 R180
WINDOW 3 21 110 Left 2
WINDOW 0 18 131 Left 2
SYMATTR Value MC33274/MC
SYMATTR InstName U2
SYMBOL cap 5840 -3872 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 33p
TEXT 5824 -4336 Left 1 ;Set Vout (0-2.5V for 0-40 V)
TEXT 5520 -4288 Left 2 ;Voltage error amplifier
TEXT 6688 -4752 Left 2 ;Voltage sense amplifier
TEXT 3920 -3704 Left 2 !.tran 0.6
TEXT 5800 -3792 Left 1 ;Set max. Iout (0-2.5V for 0-5A)
TEXT 5488 -3704 Left 2 ;Current error amplifier
TEXT 3920 -3856 Left 2 !.inc QBCP56-16.lib
TEXT 7312 -4296 Left 2 !.model MYSW SW(Ron=10m Roff=1Meg Vt=.5 Vh=-.4)
TEXT 6064 -4880 Left 2 ;Down-programmer
TEXT 4688 -3840 Left 2 ;Set to 5V to disable Down-programmer
TEXT 3920 -3784 Left 2 !.include BDX53C.lib
TEXT 3920 -3824 Left 2 !.inc LM339A.5_1_ti.txt
TEXT 3928 -3744 Left 2 !.inc motoramp.lib
TEXT 5232 -5664 Left 4 ;EEZ DIB DCP405 power module postregulator simulation \nMore info: www.envox.hr/eez or github.com/eez-open/modular-psu
TEXT 3736 -4440 Left 2 ;CV / CC detection and indicators
RECTANGLE Normal 6960 -4784 6256 -4256 2
RECTANGLE Normal 5472 -4256 6144 -4800 2
RECTANGLE Normal 6144 -3680 5472 -4224 2
RECTANGLE Normal 7280 -4272 7088 -4736 2
RECTANGLE Normal 6848 -5520 6048 -4864 2
RECTANGLE Normal 4880 -5280 3712 -4416 2
